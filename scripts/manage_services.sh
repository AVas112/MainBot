#!/bin/bash

# u0421u043au0440u0438u043fu0442 u0434u043bu044f u0443u043fu0440u0430u0432u043bu0435u043du0438u044f u0441u0435u0440u0432u0438u0441u0430u043cu0438 telegrambot u0438 botadmin

show_menu() {
    echo "===== u0423u043fu0440u0430u0432u043bu0435u043du0438u0435 u0441u0435u0440u0432u0438u0441u0430u043cu0438 telegrambot u0438 botadmin ====="
    echo "1. u0417u0430u043fu0443u0441u0442u0438u0442u044c u0441u0435u0440u0432u0438u0441u044b"
    echo "2. u041fu0440u043eu0432u0435u0440u0438u0442u044c u0441u0442u0430u0442u0443u0441 u0441u0435u0440u0432u0438u0441u043eu0432"
    echo "3. u0412u043au043bu044eu0447u0438u0442u044c u0430u0432u0442u043eu0437u0430u043fu0443u0441u043au0430 u0441u0435u0440u0432u0438u0441u043eu0432"
    echo "4. u041fu0435u0440u0435u0437u0430u043fu0443u0441u0442u0438u0442u044c u0441u0435u0440u0432u0438u0441u044b"
    echo "5. u041eu0441u0442u0430u043du043eu0432u0438u0442u044c u0441u0435u0440u0432u0438u0441u044b"
    echo "0. u0412u044bu0445u043eu0434"
    echo "u0412u0432u0435u0434u0438u0442u0435 u043du043eu043cu0435u0440 u0434u0435u0439u0441u0442u0432u0438u044f: "
}

start_services() {
    echo "u0417u0430u043fu0443u0441u043a u0441u0435u0440u0432u0438u0441u043eu0432..."
    systemctl start telegrambot.service
    systemctl start botadmin.service
    echo "u0421u0435u0440u0432u0438u0441u044b u0437u0430u043fu0443u0449u0435u043du044b."
}

check_status() {
    echo "u041fu0440u043eu0432u0435u0440u043au0430 u0441u0442u0430u0442u0443u0441u0430 u0441u0435u0440u0432u0438u0441u043eu0432..."
    echo "
u0421u0442u0430u0442u0443u0441 telegrambot.service:"
    systemctl status telegrambot.service --no-pager
    echo "
u0421u0442u0430u0442u0443u0441 botadmin.service:"
    systemctl status botadmin.service --no-pager
}

enable_autostart() {
    echo "u0412u043au043bu044eu0447u0435u043du0438u0435 u0430u0432u0442u043eu0437u0430u043fu0443u0441u043au0430 u0441u0435u0440u0432u0438u0441u043eu0432..."
    systemctl enable telegrambot.service
    systemctl enable botadmin.service
    echo "u0410u0432u0442u043eu0437u0430u043fu0443u0441u043au0430 u0432u043au043bu044eu0447u0435u043du0430 u0434u043bu044f u043eu0431u043eu0438u0445 u0441u0435u0440u0432u0438u0441u043eu0432."
}

restart_services() {
    echo "u041fu0435u0440u0435u0437u0430u043fu0443u0441u043a u0441u0435u0440u0432u0438u0441u043eu0432..."
    systemctl restart telegrambot.service
    systemctl restart botadmin.service
    echo "u0421u0435u0440u0432u0438u0441u044b u043fu0435u0440u0435u0437u0430u043fu0443u0449u0435u043du044b."
}

stop_services() {
    echo "u041eu0441u0442u0430u043du043eu0432u043au0430 u0441u0435u0440u0432u0438u0441u043eu0432..."
    systemctl stop telegrambot.service
    systemctl stop botadmin.service
    echo "u0421u0435u0440u0432u0438u0441u044b u043eu0441u0442u0430u043du043eu0432u043bu0435u043du044b."
}

# u041eu0441u043du043eu0432u043du043eu0439 u0446u0438u043au043b u043fu0440u043eu0433u0440u0430u043cu043cu044b
while true; do
    show_menu
    read -r choice
    
    case $choice in
        1) start_services; echo "
"; ;;
        2) check_status; echo "
"; ;;
        3) enable_autostart; echo "
"; ;;
        4) restart_services; echo "
"; ;;
        5) stop_services; echo "
"; ;;
        0) echo "u0412u044bu0445u043eu0434 u0438u0437 u043fu0440u043eu0433u0440u0430u043cu043cu044b."; exit 0; ;;
        *) echo "u041du0435u0432u0435u0440u043du044bu0439 u0432u044bu0431u043eu0440. u041fu043eu0436u0430u043bu0443u0439u0441u0442u0430, u0432u044bu0431u0435u0440u0438u0442u0435 u0441u043du043eu0432u0430."; echo "
"; ;;
    esac
done
